DocLayNet:ALargeHuman-AnnotatedDatasetforDocument-LayoutAnalysis KDD’22,August14–18,2022,Washington,DC,USA
Table1showstheoverallfrequencyanddistributionofthelabels
Scientific amongthedifferentsets.Importantly,weensurethatsubsetsare
onlysplitonfull-documentboundaries.Thisavoidsthatpagesof
Financial
17% thesamedocumentarespreadovertrain,testandvalidationset,
32% Patents whichcangiveanundesiredevaluationadvantagetomodelsand
8% leadtooverestimationoftheirpredictionaccuracy.Wewillshow
theimpactofthisdecisioninSection5.
Inordertoaccommodatethedifferenttypesofmodelscurrently
6% 21% inusebythecommunity,weprovideDocLayNetinanaugmented
16% COCOformat[16].ThisentailsthestandardCOCOground-truth
Tenders Manuals
file (in JSON format) with the associated page images (in PNG
format,1025×1025pixels).Furthermore,customfieldshavebeen
Laws
addedtoeachCOCOrecordtospecifydocumentcategory,original
documentfilenameandpagenumber.Inaddition,wealsoprovide
Figure2:DistributionofDocLayNetpagesacrossdocument
theoriginalPDFpages,aswellassidecarfilescontainingparsed
categories.
PDFtextandtext-cellcoordinates(inJSON).Alladditionalfilesare
linkedtotheprimarypageimagesbytheirmatchingfilenames.
Despitebeingcost-intenseandfarlessscalablethanautomation,
toaminimum,sincetheyintroducedifficultiesinannotation(see humanannotationhasseveralbenefitsoverautomatedground-
Section4).Asasecondcondition,wefocussedonmediumtolarge truthgeneration.Thefirstandmostobviousreasontoleverage
documents(>10pages)withtechnicalcontent,denseincomplex
humanannotationsisthefreedomtoannotateanytypeofdoc-
tables,figures,plotsandcaptions.Suchdocumentscarryalotof umentwithoutrequiringaprogrammaticsource.FormostPDF
informationvalue,butareoftenhardtoanalysewithhighaccuracy documents,theoriginalsourcedocumentisnotavailable.Thelat-
duetotheirchallenginglayouts.Counterexamplesofdocuments terisnotahardconstraintwithhumanannotation,butitisfor
not included in the dataset are receipts, invoices, hand-written automatedmethods.Asecondreasontousehumanannotationsis
documentsorphotographsshowing“textinthewild". thatthelatterusuallyprovideamorenaturalinterpretationofthe
ThepagesinDocLayNetcanbegroupedintosixdistinctcate- pagelayout.Thehuman-interpretedlayoutcansignificantlydevi-
gories,namelyFinancialReports,Manuals,ScientificArticles,Laws& atefromtheprogrammaticlayoutusedintypesetting.Forexample,
Regulations,PatentsandGovernmentTenders.Eachdocumentcate- “invisible”tablesmightbeusedsolelyforaligningtextparagraphs
gorywassourcedfromvariousrepositories.Forexample,Financial oncolumns.Suchtypesettingtricksmightbeinterpretedbyau-
Reportscontainbothfree-styleformatannualreports2whichex-
tomatedmethodsincorrectlyasanactualtable,whilethehuman
posecompany-specific,artisticlayoutsaswellasthemoreformal annotationwillinterpretitcorrectlyasTextorotherstyles.The
SECfilings.Thetwolargestcategories(FinancialReportsandMan- sameappliestomulti-linetextelements,whenauthorsdecidedto
uals)containalargeamountoffree-stylelayoutsinordertoobtain spacethemas“invisible”listelementswithoutbulletsymbols.A
maximumvariability.Intheotherfourcategories,weboostedthe thirdreasontogatherground-truththroughhumanannotationis
variabilitybymixingdocumentsfromindependentproviders,such toestimatea“natural”upperboundonthesegmentationaccuracy.
asdifferentgovernmentwebsitesorpublishers.InFigure2,we AswewillshowinSection4,certaindocumentsfeaturingcomplex
showthedocumentcategoriescontainedinDocLayNetwiththeir layoutscanhavedifferentbutequallyacceptablelayoutinterpre-
respectivesizes. tations.Thisnaturalupperboundforsegmentationaccuracycan
Wedidnotcontrolthedocumentselectionwithregardtolan- befoundbyannotatingthesamepagesmultipletimesbydifferent
guage.ThevastmajorityofdocumentscontainedinDocLayNet peopleandevaluatingtheinter-annotatoragreement.Suchabase-
(close to 95%) are published in English language. However, Do- lineconsistencyevaluationisveryusefultodefineexpectations
cLayNetalsocontainsanumberofdocumentsinotherlanguages foragoodtargetaccuracyintraineddeepneuralnetworkmodels
suchasGerman(2.5%),French(1.0%)andJapanese(1.0%).While andavoidoverfitting(seeTable1).Ontheflipside,achievinghigh
thedocumentlanguagehasnegligibleimpactontheperformance annotation consistency proved to be a key challenge in human
ofcomputervisionmethodssuchasobjectdetectionandsegmenta- annotation,asweoutlineinSection4.
tionmodels,itmightprovechallengingforlayoutanalysismethods
whichexploittextualfeatures.
4 ANNOTATIONCAMPAIGN
Toensurethatfuturebenchmarksinthedocument-layoutanaly-
siscommunitycanbeeasilycompared,wehavesplitupDocLayNet
intopre-definedtrain-,test-andvalidation-sets.Inthisway,wecan Theannotationcampaignwascarriedoutinfourphases.Inphase
avoidspuriousvariationsintheevaluationscoresduetorandom one,weidentifiedandpreparedthedatasourcesforannotation.
splittingintrain-,test-andvalidation-sets.Wealsoensuredthat Inphasetwo,wedeterminedtheclasslabelsandhowannotations
lessfrequentlabelsarerepresentedintrainandtestsetsinequal shouldbedoneonthedocumentsinordertoobtainmaximumcon-
proportions. sistency.Thelatterwasguidedbyadetailedrequirementanalysis
andexhaustiveexperiments.Inphasethree,wetrainedtheannota-
2e.g.AAPLfromhttps://www.annualreports.com/ tionstaffandperformedexamsforqualityassurance.Inphasefour,